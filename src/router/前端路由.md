# 前端路由

## 路由
 路由通常存在于后端，当浏览器通过http请求向后台发送页面请求时，后台根据发送请求的路径去自身的路由匹配规则中去查找相应的页面，然后返回对应的页面。随着 spa 应用的诞生，前端开始产生了路由的概念，即页面的路径跳转不再去访问服务端，仅仅在前端页面控制显示隐藏，来实现页面跳转的效果。可以避免页面刷新，达到类似于APP的原生应用效果，极大提升了用户体验。

 ## 前端路由的实现

 | 前端路由通常有两种实现方式，即 hash 模式以及 html5 api history实现的方式。

 ### hash 模式实现
    |hash模式的实现依赖于浏览器的锚链接，即在页面路径后面添加类似于 http://127.0.0.1:5500/#login的锚点来实现页面无刷新跳转效果，主要利用了 监听浏览器的onhashchange事件来监视页面锚点的添加与移除，然后执行对应的操作

```javascript
    login.addEventListener('click', () => {
        window.location.hash = '#login'
    })
    register.addEventListener('click', () => {
        window.location.hash = '#register'
    })
    window.addEventListener('hashchange', () => {
        console.log('hash changed!');
        console.log(window.location.hash);
        hashValue.innerText = window.location.hash
    })
```

### history 模式
    |通过调用html5的api history.pushState来动态修改页面路径而不会导致页面进行刷新，然后通过监听浏览器的popstate事件来在浏览器前进、后退事件触发时监听页面路径的变化

```javascript

    login.addEventListener('click', () => {
        window.history.pushState({ name: 'login' }, '', '/login')
        historyValue.innerText = 'login'
    })
    register.addEventListener('click', () => {
        window.history.pushState({ name: 'register' }, '', '/register')
        historyValue.innerText = 'register'
    })
    window.addEventListener('DOMContentLoaded', () => {
        historyValue.innerText = window.history.state.name

    })
    window.addEventListener('popstate', (data) => {
        console.log('history changed!');
        historyValue.innerText = data.state.name
    })
```
    需要注意的是，history api需要后台的配合，当通过history.pushState 方法修改页面路径后刷新页面会将当前修改过后的路径提交给后端，由于后端的路由规则内并不存在该路由所以会报404，所以需要后台配合前端无论请求什么路径都需要返回首页，然后由前端来接管路由渲染对应的页面
